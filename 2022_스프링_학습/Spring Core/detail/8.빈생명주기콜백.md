# 8.ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±

## ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ì‹œì‘

ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ í’€ì´ë‚˜, ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— í•„ìš”í•œ ì—°ê²°ì„ ë¯¸ë¦¬ í•´ë‘ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì‹œì ì— ì—°ê²°ì„ ëª¨ë‘ ì¢…ë£Œí•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•˜ë ¤ë©´, ê°ì²´ì˜ ì´ˆê¸°í™”ì™€ ì¢…ë£Œ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.

ì´ë²ˆì‹œê°„ì—ëŠ” ìŠ¤í”„ë§ì„ í†µí•´ ì´ëŸ¬í•œ ì´ˆê¸°í™” ì‘ì—…ê³¼ ì¢…ë£Œ ì‘ì—…ì„ ì–´ë–»ê²Œ ì§„í–‰í•˜ëŠ”ì§€ ì˜ˆì œë¡œ ì•Œì•„ë³´ì.

ê°„ë‹¨í•˜ê²Œ ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì— ë¯¸ë¦¬ ì—°ê²°í•˜ëŠ” ê°ì²´ë¥¼ í•˜ë‚˜ ìƒì„±í•œë‹¤ê³  ê°€ì •í•´ë³´ì. ì‹¤ì œë¡œ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³ , ë‹¨ìˆœíˆ ë¬¸ìë§Œ ì¶œë ¥í•˜ë„ë¡ í–ˆë‹¤. ì´ `NetworkClient` ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— `connect()` ë¥¼ í˜¸ì¶œí•´ì„œ ì—°ê²°ì„ ë§ºì–´ë‘ì–´ì•¼ í•˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë˜ë©´ `disConnect()` ë¥¼ í˜¸ì¶œí•´ì„œ ì—°ê²°ì„ ëŠì–´ì•¼ í•œë‹¤.

```java
public class NetworkClient {
 private String url;
 public NetworkClient() {
 System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
 connect();
 call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
 }
 public void setUrl(String url) {
 this.url = url;
 }
 //ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
 public void connect() {
 System.out.println("connect: " + url);
 }
 public void call(String message) {
 System.out.println("call: " + url + " message = " + message);
 }
 //ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
 public void disconnect() {
 System.out.println("close: " + url);
 }
}
```

**ìŠ¤í”„ë§ í™˜ê²½ì„¤ì •ê³¼ ì‹¤í–‰**

```java
import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import
org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
public class BeanLifeCycleTest {
 @Test
 public void lifeCycleTest() {
 ConfigurableApplicationContext ac = new
AnnotationConfigApplicationContext(LifeCycleConfig.class);
 NetworkClient client = ac.getBean(NetworkClient.class);
 ac.close(); //ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œ, ConfigurableApplicationContext í•„ìš”
 }
 @Configuration
 static class LifeCycleConfig {
 @Bean
 public NetworkClient networkClient() {
 NetworkClient networkClient = new NetworkClient();
 networkClient.setUrl("http://hello-spring.dev");
 return networkClient;
 }
 }
}
```

ì‹¤í–‰í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì´ìƒí•œ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.

```
ìƒì„±ì í˜¸ì¶œ, url = null
connect: null
call: null message = ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
```

ìƒì„±ì ë¶€ë¶„ì„ ë³´ë©´ url ì •ë³´ ì—†ì´ connectê°€ í˜¸ì¶œë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ë„ˆë¬´ ë‹¹ì—°í•œ ì´ì•¼ê¸°ì´ì§€ë§Œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë‹¨ê³„ì—ëŠ” urlì´ ì—†ê³ , ê°ì²´ë¥¼ ìƒì„±í•œ ë‹¤ìŒì— ì™¸ë¶€ì—ì„œ ìˆ˜ì •ì ì£¼ì…ì„ í†µí•´ì„œ setUrl() ì´ í˜¸ì¶œë˜ì–´ì•¼ urlì´ ì¡´ì¬í•˜ê²Œ ëœë‹¤.

ìŠ¤í”„ë§ ë¹ˆì€ ê°„ë‹¨í•˜ê²Œ ë‹¤ìŒê³¼ ê°™ì€ ë¼ì´í”„ì‚¬ì´í´ì„ ê°€ì§„ë‹¤.

**ê°ì²´ ìƒì„± â†’ ì˜ì¡´ê´€ê³„ ì£¼ì…**

ìŠ¤í”„ë§ ë¹ˆì€ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ë‹¤ ëë‚œ ë‹¤ìŒì—ì•¼ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¤€ë¹„ê°€ ì™„ë£Œëœë‹¤. ë”°ë¼ì„œ ì´ˆê¸°í™” ì‘ì—…ì€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëª¨ë‘ ì™„ë£Œë˜ê³  ë‚œ ë‹¤ìŒì— í˜¸ì¶œí•´ì•¼ í•œë‹¤. ê·¸ëŸ°ë° ê°œë°œìê°€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëª¨ë‘ ì™„ë£Œëœ ì‹œì ì„ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œ?

**ìŠ¤í”„ë§ì€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œë˜ë©´ ìŠ¤í”„ë§ ë¹ˆì—ê²Œ ì½œë°± ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì´ˆê¸°í™” ì‹œì ì„ ì•Œë ¤ì£¼ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µ**í•œë‹¤. ë˜í•œ **ìŠ¤í”„ë§ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ê¸° ì§ì „ì— ì†Œë©¸ ì½œë°±**ì„ ì¤€ë‹¤. ë”°ë¼ì„œ ì•ˆì „í•˜ê²Œ ì¢…ë£Œ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤.

**ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë²¤íŠ¸ ë¼ì´í”„ì‚¬ì´í´**

**ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± â†’ ìŠ¤í”„ë§ ë¹ˆ ìƒì„± â†’ ì˜ì¡´ê´€ê³„ ì£¼ì… â†’ ì´ˆê¸°í™” ì½œë°± â†’ ì‚¬ìš© â†’ ì†Œë©¸ì „ ì½œë°± â†’ ìŠ¤í”„ë§ ì¢…ë£Œ**

- **ì´ˆê¸°í™” ì½œë°±**: ë¹ˆì´ ìƒì„±ë˜ê³ , ë¹ˆì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œëœ í›„ í˜¸ì¶œ
- **ì†Œë©¸ì „ ì½œë°±**: ë¹ˆì´ ì†Œë©¸ë˜ê¸° ì§ì „ì— í˜¸ì¶œ

ìŠ¤í”„ë§ì€ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ìƒëª…ì£¼ê¸° ì½œë°±ì„ ì§€ì›í•œë‹¤.

> ğŸ’¡ **ê°ì²´ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ë¶„ë¦¬í•˜ì.**
ìƒì„±ìëŠ” í•„ìˆ˜ ì •ë³´(íŒŒë¼ë¯¸í„°)ë¥¼ ë°›ê³ , ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•´ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì±…ì„ì„ ê°€ì§„ë‹¤. ë°˜ë©´ì— ì´ˆê¸°í™”ëŠ” ì´ë ‡ê²Œ ìƒì„±ëœ ê°’ë“¤ì„ í™œìš©í•´ì„œ ì™¸ë¶€ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ”ë“± ë¬´ê±°ìš´ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.
ë”°ë¼ì„œ ìƒì„±ì ì•ˆì—ì„œ ë¬´ê±°ìš´ ì´ˆê¸°í™” ì‘ì—…ì„ í•¨ê»˜ í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ê³¼ ì´ˆê¸°í™” í•˜ëŠ” ë¶€ë¶„ì„ ëª…í™•í•˜ê²Œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ ì¢‹ë‹¤. ë¬¼ë¡  ì´ˆê¸°í™” ì‘ì—…ì´ ë‚´ë¶€ ê°’ë“¤ë§Œ ì•½ê°„ ë³€ê²½í•˜ëŠ” ì •ë„ë¡œ ë‹¨ìˆœí•œ ê²½ìš°ì—ëŠ” ìƒì„±ìì—ì„œ í•œë²ˆì— ë‹¤ ì²˜ë¦¬í•˜ëŠ”ê²Œ ë” ë‚˜ì„ ìˆ˜ ìˆë‹¤.



> ğŸ’¡  ì‹±ê¸€í†¤ ë¹ˆë“¤ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ ì‹±ê¸€í†¤ ë¹ˆë“¤ë„ í•¨ê»˜ ì¢…ë£Œë˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ê¸° ì§ì „ì— ì†Œë©¸ì „ ì½œë°±ì´ ì¼ì–´ë‚œë‹¤. ë’¤ì—ì„œ ì„¤ëª…í•˜ê² ì§€ë§Œ ì‹±ê¸€í†¤ ì²˜ëŸ¼ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ìƒì¡´í•˜ëŠ” ë¹ˆë„ ìˆì§€ë§Œ, ìƒëª…ì£¼ê¸°ê°€ ì§§ì€ ë¹ˆë“¤ë„ ìˆëŠ”ë° ì´ ë¹ˆë“¤ì€ ì»¨í…Œì´ë„ˆì™€ ë¬´ê´€í•˜ê²Œ í•´ë‹¹ ë¹ˆì´ ì¢…ë£Œë˜ê¸° ì§ì „ì— ì†Œë©¸ì „ ì½œë°±ì´ ì¼ì–´ë‚œë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ìŠ¤ì½”í”„ì—ì„œ ì•Œì•„ë³´ê² ë‹¤.



**ìŠ¤í”„ë§ì€ í¬ê²Œ 3ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±ì„ ì§€ì›í•œë‹¤.**

- ì¸í„°í˜ì´ìŠ¤(InitializingBean, DisposableBean)
- ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ë©”ì„œë“œ, ì¢…ë£Œ ë©”ì„œë“œ ì§€ì •
- @PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ ì§€ì›

í•˜ë‚˜ì”© ì•Œì•„ë³´ì.

---

## ì¸í„°í˜ì´ìŠ¤ InitializingBean, DisposableBean

```java
package hello.core.lifecycle;
import org.springframework.beans.factory.DisposableBean;
import org.springframework.beans.factory.InitializingBean;
public class NetworkClient implements InitializingBean, DisposableBean {
 private String url;
 public NetworkClient() {
 System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
 }
 public void setUrl(String url) {
 this.url = url;
 }
 //ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
 public void connect() {
 System.out.println("connect: " + url);
 }
 public void call(String message) {
 System.out.println("call: " + url + " message = " + message);
 }
 //ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
 public void disConnect() {
 System.out.println("close + " + url);
 }
 @Override
 public void afterPropertiesSet() throws Exception {
 connect();
 call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
 }
 @Override
 public void destroy() throws Exception {
 disConnect();
 }
}
```

`InitializingBean` ì€ `afterPropertiesSet()` ë©”ì„œë“œë¡œ ì´ˆê¸°í™”ë¥¼ ì§€ì›í•œë‹¤.

`DisposableBean` ì€ `destroy()` ë©”ì„œë“œë¡œ ì†Œë©¸ì„ ì§€ì›í•œë‹¤.

**ì¶œë ¥ ê²°ê³¼**

```
ìƒì„±ì í˜¸ì¶œ, url = null
NetworkClient.afterPropertiesSet
connect: [http://hello-spring.dev](http://hello-spring.dev/)
call: [http://hello-spring.dev](http://hello-spring.dev/) message = ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
13:24:49.043 [main] DEBUG
org.springframework.context.annotation.AnnotationConfigApplicationContext -
Closing NetworkClient.destroy
close + [http://hello-spring.dev](http://hello-spring.dev/)
```

- ì¶œë ¥ ê²°ê³¼ë¥¼ ë³´ë©´ ì´ˆê¸°í™” ë©”ì„œë“œê°€ ì£¼ì… ì™„ë£Œ í›„ì— ì ì ˆí•˜ê²Œ í˜¸ì¶œ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ê·¸ë¦¬ê³  ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì¢…ë£Œê°€ í˜¸ì¶œë˜ì ì†Œë©¸ ë©”ì„œë“œê°€ í˜¸ì¶œ ëœ ê²ƒë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

**ì´ˆê¸°í™”, ì†Œë©¸ ì¸í„°í˜ì´ìŠ¤ ë‹¨ì **

- ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ë‹¤. í•´ë‹¹ ì½”ë“œê°€ ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤.
- ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œì˜ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.
- ë‚´ê°€ ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì ìš©í•  ìˆ˜ ì—†ë‹¤.

InitializingBean ê³¼ DisposableBeanì€ 2003ë…„ Juergen Hoellerì— ì˜í•´ ì‘ì„±ëœ ì• ë„ˆí…Œì´ì…˜ì´ë‹¤... ì˜¤ë˜ë¨.

> ğŸ’¡ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ˆê¸°í™”, ì¢…ë£Œ ë°©ë²•ì€ ìŠ¤í”„ë§ ì´ˆì°½ê¸°ì— ë‚˜ì˜¨ ë°©ë²•ë“¤ì´ê³ , ì§€ê¸ˆì€ ë‹¤ìŒì˜ ë” ë‚˜ì€ ë°©ë²•ë“¤ì´ ìˆì–´ì„œ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.



---

## ë¹ˆ ë“±ë¡ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œ

ì„¤ì • ì •ë³´ì— `@Bean(initMethod = "init", destroyMethod = "close")` ì²˜ëŸ¼ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

**ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½**

```java
package hello.core.lifecycle;
public class NetworkClient {
 private String url;
 public NetworkClient() {
 System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
 }
 public void setUrl(String url) {
 this.url = url;
 }
 //ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
 public void connect() {
 System.out.println("connect: " + url);
 }
 public void call(String message) {
 System.out.println("call: " + url + " message = " + message);
 }
 //ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
 public void disConnect() {
 System.out.println("close + " + url);
 }
 public void init() {
 System.out.println("NetworkClient.init");
 connect();
 call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
 }
 public void close() {
 System.out.println("NetworkClient.close");
 disConnect();
 }
}
```

ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ì†Œë©¸ ë©”ì„œë“œ ì§€ì •

```java
@Configuration
static class LifeCycleConfig {
 @Bean(initMethod = "init", destroyMethod = "close")
 public NetworkClient networkClient() {
 NetworkClient networkClient = new NetworkClient();
 networkClient.setUrl("http://hello-spring.dev");
 return networkClient;
 }
}
```

ê²°ê³¼

```
ìƒì„±ì í˜¸ì¶œ, url = null
NetworkClient.init
connect: http://hello-spring.dev
call: http://hello-spring.dev message = ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
13:33:10.029 [main] DEBUG
org.springframework.context.annotation.AnnotationConfigApplicationContext -
Closing NetworkClient.close
close + http://hello-spring.dev
```

**ì„¤ì • ì •ë³´ ì‚¬ìš© íŠ¹ì§•**

ë©”ì„œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì¤„ ìˆ˜ ìˆë‹¤.

ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.

ì½”ë“œê°€ ì•„ë‹ˆë¼ ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì´ˆê¸°í™”, ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤.

**ì¢…ë£Œ ë©”ì„œë“œ ì¶”ë¡ (inferred)**

**@Bean**ì˜ **destroyMethod** ì†ì„±ì—ëŠ” ì•„ì£¼ íŠ¹ë³„í•œ ê¸°ëŠ¥ì´ ìˆë‹¤.

ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ëŒ€ë¶€ë¶„ `close` , `shutdown` ì´ë¼ëŠ” ì´ë¦„ì˜ ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤.

@Beanì˜ `destroyMethod` ëŠ” ê¸°ë³¸ê°’ì´ `(inferred)` (ì¶”ë¡ )ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆë‹¤.

ì´ ì¶”ë¡  ê¸°ëŠ¥ì€ `close , shutdown` ë¼ëŠ” ì´ë¦„ì˜ ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•´ì¤€ë‹¤. ì´ë¦„ ê·¸ëŒ€ë¡œ ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì¶”ë¡ í•´ì„œ í˜¸ì¶œí•´ì¤€ë‹¤.

ë”°ë¼ì„œ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ì¢…ë£Œ ë©”ì„œë“œëŠ” ë”°ë¡œ ì ì–´ì£¼ì§€ ì•Šì•„ë„ ì˜ ë™ì‘í•œë‹¤.

ì¶”ë¡  ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ì‹«ìœ¼ë©´ `destroyMethod=""` ì²˜ëŸ¼ ë¹ˆ ê³µë°±ì„ ì§€ì •í•˜ë©´ ëœë‹¤.

---

## ì• ë…¸í…Œì´ì…˜ @PostConstruct, @PreDestroy

ìš°ì„  ì½”ë“œ ë¨¼ì € ë³´ê³  ì„¤ëª…í•˜ê² ë‹¤.

```java
package hello.core.lifecycle;
import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;
public class NetworkClient {
 private String url;
 public NetworkClient() {
 System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
 }
 public void setUrl(String url) {
 this.url = url;
 }
 //ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
 public void connect() {
 System.out.println("connect: " + url);
 }
 public void call(String message) {
 System.out.println("call: " + url + " message = " + message);
 }
 //ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
 public void disConnect() {
 System.out.println("close + " + url);
 }
 @PostConstruct
 public void init() {
 System.out.println("NetworkClient.init");
 connect();
 call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
 }
 @PreDestroy
 public void close() {
 System.out.println("NetworkClient.close");
 disConnect();
 }
}
```

```java
@Configuration
static class LifeCycleConfig {
 @Bean
 public NetworkClient networkClient() {
 NetworkClient networkClient = new NetworkClient();
 networkClient.setUrl("http://hello-spring.dev");
 return networkClient;
 }
}
```

ì‹¤í–‰ ê²°ê³¼

```
ìƒì„±ì í˜¸ì¶œ, url = null
NetworkClient.init
connect: http://hello-spring.dev
call: http://hello-spring.dev message = ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
19:40:50.269 [main] DEBUG
org.springframework.context.annotation.AnnotationConfigApplicationContext -
Closing NetworkClient.close
close + http://hello-spring.dev
```

`@PostConstruct` , `@PreDestroy` ì´ ë‘ ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ê°€ì¥ í¸ë¦¬í•˜ê²Œ ì´ˆê¸°í™”ì™€ ì¢…ë£Œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

**@PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ íŠ¹ì§•**

- ìµœì‹  ìŠ¤í”„ë§ì—ì„œ ê°€ì¥ ê¶Œì¥í•˜ëŠ” ë°©ë²•ì´ë‹¤.
- ì• ë…¸í…Œì´ì…˜ í•˜ë‚˜ë§Œ ë¶™ì´ë©´ ë˜ë¯€ë¡œ ë§¤ìš° í¸ë¦¬í•˜ë‹¤.
- íŒ¨í‚¤ì§€ë¥¼ ì˜ ë³´ë©´ javax.annotation.PostConstruct ì´ë‹¤. ìŠ¤í”„ë§ì— ì¢…ì†ì ì¸ ê¸°ìˆ ì´ ì•„ë‹ˆë¼ JSR-250 ë¼ëŠ” ìë°” í‘œì¤€ì´ë‹¤. ë”°ë¼ì„œ ìŠ¤í”„ë§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œë„ ë™ì‘í•œë‹¤.
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ ì–´ìš¸ë¦°ë‹¤.
- ìœ ì¼í•œ ë‹¨ì ì€ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ì ìš©í•˜ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ˆê¸°í™”, ì¢…ë£Œ í•´ì•¼ í•˜ë©´ @Beanì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì.

**ì •ë¦¬**

**@PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì**

ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ˆê¸°í™”, ì¢…ë£Œí•´ì•¼ í•˜ë©´ `@Bean` ì˜ `initMethod` , `destroyMethod`ë¥¼ ì‚¬ìš©í•˜ì.